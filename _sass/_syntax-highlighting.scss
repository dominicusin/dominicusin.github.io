/**
 * Syntax highlighting styles
 */
.highlight {
    background: #f8fafc;
    @extend %vertical-rhythm;
    @include border-radius(8px);
    @include box-shadow(0 2px 4px rgba(0, 0, 0, 0.05));
    margin: $spacing-unit 0;

    .highlighter-rouge & {
        background: #f8fafc;
    }

    // Base styles
    .c     { color: #6a737d; font-style: italic } // Comment
    .err   { color: #cb2431; background-color: #ffeef0 } // Error
    .k     { color: #d73a49; font-weight: 600 } // Keyword
    .o     { color: #d73a49; font-weight: 600 } // Operator
    .cm    { color: #6a737d; font-style: italic } // Comment.Multiline
    .cp    { color: #6a737d; font-weight: 600 } // Comment.Preproc
    .c1    { color: #6a737d; font-style: italic } // Comment.Single
    .cs    { color: #6a737d; font-weight: 600; font-style: italic } // Comment.Special
    .gd    { color: #cb2431; background-color: #ffeef0 } // Generic.Deleted
    .ge    { font-style: italic } // Generic.Emph
    .gr    { color: #cb2431 } // Generic.Error
    .gh    { color: #005cc5; font-weight: 600 } // Generic.Heading
    .gi    { color: #22863a; background-color: #f0fff4 } // Generic.Inserted
    .go    { color: #6a737d } // Generic.Output
    .gp    { color: #6a737d } // Generic.Prompt
    .gs    { font-weight: 600 } // Generic.Strong
    .gu    { color: #6f42c1; font-weight: 600 } // Generic.Subheading
    .gt    { color: #cb2431 } // Generic.Traceback
    .kc    { color: #005cc5; font-weight: 600 } // Keyword.Constant
    .kd    { color: #d73a49; font-weight: 600 } // Keyword.Declaration
    .kn    { color: #d73a49; font-weight: 600 } // Keyword.Namespace
    .kp    { color: #d73a49; font-weight: 600 } // Keyword.Pseudo
    .kr    { color: #d73a49; font-weight: 600 } // Keyword.Reserved
    .kt    { color: #d73a49; font-weight: 600 } // Keyword.Type
    .m     { color: #005cc5 } // Literal.Number
    .s     { color: #032f62 } // Literal.String
    .na    { color: #6f42c1 } // Name.Attribute
    .nb    { color: #005cc5 } // Name.Builtin
    .nc    { color: #6f42c1; font-weight: 600 } // Name.Class
    .no    { color: #005cc5; font-weight: 600 } // Name.Constant
    .nd    { color: #6f42c1; font-weight: 600 } // Name.Decorator
    .ni    { color: #6f42c1 } // Name.Entity
    .ne    { color: #6f42c1; font-weight: 600 } // Name.Exception
    .nf    { color: #6f42c1; font-weight: 600 } // Name.Function
    .nl    { color: #6f42c1; font-weight: 600 } // Name.Label
    .nn    { color: #6f42c1 } // Name.Namespace
    .nt    { color: #22863a; font-weight: 600 } // Name.Tag
    .nv    { color: #e36209 } // Name.Variable
    .ow    { color: #d73a49; font-weight: 600 } // Operator.Word
    .w     { color: #6a737d } // Text.Whitespace
    .mf    { color: #005cc5 } // Literal.Number.Float
    .mh    { color: #005cc5 } // Literal.Number.Hex
    .mi    { color: #005cc5 } // Literal.Number.Integer
    .mo    { color: #005cc5 } // Literal.Number.Oct
    .sb    { color: #032f62 } // Literal.String.Backtick
    .sc    { color: #032f62 } // Literal.String.Char
    .sd    { color: #032f62 } // Literal.String.Doc
    .s2    { color: #032f62 } // Literal.String.Double
    .se    { color: #032f62 } // Literal.String.Escape
    .sh    { color: #032f62 } // Literal.String.Heredoc
    .si    { color: #032f62 } // Literal.String.Interpol
    .sx    { color: #032f62 } // Literal.String.Other
    .sr    { color: #032f62 } // Literal.String.Regex
    .s1    { color: #032f62 } // Literal.String.Single
    .ss    { color: #005cc5 } // Literal.String.Symbol
    .bp    { color: #005cc5 } // Name.Builtin.Pseudo
    .vc    { color: #e36209 } // Name.Variable.Class
    .vg    { color: #e36209 } // Name.Variable.Global
    .vi    { color: #e36209 } // Name.Variable.Instance
    .il    { color: #005cc5 } // Literal.Number.Integer.Long

    // Language specific
    .language-bash .nb { color: #005cc5; font-weight: 600 }
    .language-javascript .nx { color: #6f42c1 }
    .language-python .bp { color: #005cc5; font-weight: 600 }
}

/**
 * Code blocks with language labels
 */
.highlight {
    position: relative;
    
    &[class*="language-"]::before {
        content: attr(class);
        content: attr(data-lang);
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 0.75rem;
        color: $grey-color;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 2px 8px;
        @include border-radius(4px);
        font-family: $mono-font-family;
        font-weight: 500;
    }
}

/**
 * Responsive tables
 */
.table-wrapper {
    overflow-x: auto;
    margin: $spacing-unit 0;
    @include box-shadow(0 1px 3px rgba(0, 0, 0, 0.1));
    @include border-radius(8px);
    border: 1px solid $border-color;
}

/**
 * Alert boxes
 */
.alert {
    padding: $spacing-unit / 2;
    margin: $spacing-unit 0;
    @include border-radius(8px);
    border-left: 4px solid;
    
    &.alert-info {
        background-color: #ebf8ff;
        border-color: $brand-color;
        color: #2c5282;
    }
    
    &.alert-warning {
        background-color: #fffbeb;
        border-color: $warning-color;
        color: #744210;
    }
    
    &.alert-error {
        background-color: #fed7d7;
        border-color: $error-color;
        color: #742a2a;
    }
    
    &.alert-success {
        background-color: #f0fff4;
        border-color: $success-color;
        color: #22543d;
    }
}

/**
 * Loading states
 */
.loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    border-top-color: $brand-color;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/**
 * Search component
 */
.search-container {
    position: relative;
    max-width: 400px;
    margin: 0 auto $spacing-unit;
}

.search-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid $border-color;
    @include border-radius(8px);
    font-size: 1rem;
    @include transition();
    
    &:focus {
        outline: none;
        border-color: $brand-color;
        @include box-shadow(0 0 0 3px rgba(49, 130, 206, 0.1));
    }
}

.search-results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid $border-color;
    @include border-radius(8px);
    @include box-shadow(0 4px 6px rgba(0, 0, 0, 0.1));
    max-height: 300px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
    
    &.active {
        display: block;
    }
}

.search-result {
    padding: 12px 16px;
    border-bottom: 1px solid $grey-color-light;
    
    &:last-child {
        border-bottom: none;
    }
    
    &:hover {
        background-color: #f7fafc;
    }
    
    a {
        color: $text-color;
        text-decoration: none;
        
        &:hover {
            color: $brand-color;
        }
    }
}

/**
 * Back to top button
 */
.back-to-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: $brand-color;
    color: white;
    width: 50px;
    height: 50px;
    @include border-radius(50%);
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    @include box-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    @include transition();
    opacity: 0;
    visibility: hidden;
    
    &.visible {
        opacity: 1;
        visibility: visible;
    }
    
    &:hover {
        background-color: $brand-color-dark;
        transform: translateY(-2px);
        text-decoration: none;
        color: white;
    }
}