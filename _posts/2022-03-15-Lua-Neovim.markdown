---
title: Lua  Neovim
date: 2022-03-15 03:33:00 +02:00
---

# –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å Lua –≤ Neovim

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

* [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
  * [–ò–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ Lua](#–∏–∑—É—á–µ–Ω–∏–µ-lua)
  * [–ò–º–µ—é—â–∏–µ—Å—è —Ç—É—Ç–æ—Ä–∏–∞–ª—ã –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞ Lua –¥–ª—è Neovim](#–∏–º–µ—é—â–∏–µ—Å—è-—Ç—É—Ç–æ—Ä–∏–∞–ª—ã-–ø–æ-–Ω–∞–ø–∏—Å–∞–Ω–∏—é-–ø–ª–∞–≥–∏–Ω–æ–≤-–Ω–∞-lua-–¥–ª—è-neovim)
  * [–°–≤—è–∑–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã](#—Å–≤—è–∑–∞–Ω–Ω—ã–µ-–ø–ª–∞–≥–∏–Ω—ã)
* [–ö—É–¥–∞ –∫–ª–∞—Å—Ç—å —Ñ–∞–π–ª—ã Lua](#–∫—É–¥–∞-–∫–ª–∞—Å—Ç—å-—Ñ–∞–π–ª—ã-lua)
  * [init.lua](#initlua)
  * [–î—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã Lua](#–¥—Ä—É–≥–∏–µ-—Ñ–∞–π–ª—ã-lua)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è)
    * [–°–æ–≤–µ—Ç—ã](#—Å–æ–≤–µ—Ç—ã)
    * [–ó–∞–º–µ—Ç–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–∞–∫–µ—Ç–æ–≤](#–∑–∞–º–µ—Ç–∫–∞-–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ-–ø–∞–∫–µ—Ç–æ–≤)
* [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lua –≤ Vimscript](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-lua-–≤-vimscript)
  * [:lua](#lua)
  * [:luado](#luado)
  * [:luafile](#luafile)
    * [luafile vs require():](#luafile-vs-require)
  * [luaeval()](#luaeval)
  * [v:lua](#vlua)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è-1)
  * [–°–æ–≤–µ—Ç—ã](#—Å–æ–≤–µ—Ç—ã-1)
* [–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω vim](#–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ-–∏–º—ë–Ω-vim)
    * [–°–æ–≤–µ—Ç—ã](#—Å–æ–≤–µ—Ç—ã-2)
* [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Vimscript –∏–∑ Lua](#–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-Vimscript-–∏–∑-Lua)
  * [vim.api.nvim_eval()](#vimapinvim_eval)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è-2)
  * [vim.api.nvim_exec()](#vimapinvim_exec)
  * [vim.api.nvim_command()](#vimapinvim_command)
    * [–°–æ–≤–µ—Ç—ã](#—Å–æ–≤–µ—Ç—ã-3)
* [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–∏ vim](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–æ–ø—Ü–∏–∏-vim)
  * [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π API](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–π-api)
  * [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è-3)
* [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ vim](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏-vim)
  * [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π API](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–π-api-1)
  * [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤-1)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è-4)
* [–í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π Vimscript](#–≤—ã–∑–æ–≤-—Ñ—É–Ω–∫—Ü–∏–π-vimscript)
  * [vim.call()](#vimcall)
  * [vim.fn.{function}()](#vimfnfunction)
    * [–°–æ–≤–µ—Ç—ã](#—Å–æ–≤–µ—Ç—ã-4)
    * [–ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è](#–ø—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è-5)
* [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∫–ª–∞–≤–∏—à](#–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π-–∫–ª–∞–≤–∏—à)
* [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥](#–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö-–∫–æ–º–∞–Ω–¥)
* [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–∫–æ–º–∞–Ω–¥](#–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–∞–≤—Ç–æ–∫–æ–º–∞–Ω–¥)
* [–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞/–ø–æ–¥—Å–≤–µ—Ç–∫–∏](#–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞–ø–æ–¥—Å–≤–µ—Ç–∫–∏)
* [–û–±—â–∏–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#–æ–±—â–∏–µ-—Å–æ–≤–µ—Ç—ã-–∏-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
  * [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–≤/—è–∑—ã–∫–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ª–∏–Ω—Ç–µ—Ä–æ–≤—è–∑—ã–∫–æ–≤—ã—Ö-—Å–µ—Ä–≤–µ—Ä–æ–≤)
    * [luacheck](#luacheck)
    * [sumneko/lua-language-server](#sumnekolua-language-server)
    * [coc.nvim](#cocnvim)
* [–†–∞–∑–Ω–æ–µ](#—Ä–∞–∑–Ω–æ–µ)
  * [vim.loop](#vimloop)
  * [vim.lsp](#vimlsp)
  * [vim.treesitter](#vimtreesitter)
  * [Transpilers](#transpilers)

Created by [gh-md-toc](https://github.com/ekalinin/github-markdown-toc)

## –í–≤–µ–¥–µ–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Lua –≤ Neovim –≤ –∫–∞—á–µ—Å—Ç–≤–µ —è–∑—ã–∫–∞ —Å –ø–µ—Ä–≤–æ–∫–ª–∞—Å—Å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –µ—ë –≤ –æ–¥–Ω—É –∏–∑ –≤–∞–∂–Ω–µ–π—à–∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞ Lua –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –º–µ–Ω—å—à–µ —Ç–∞–∫–æ–≤—ã—Ö –Ω–∞ Vimscript.
–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ø—ã—Ç–∫–æ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞ Lua.

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Neovim [nightly build](https://github.com/neovim/neovim/releases/tag/nightly).
–¢–∞–∫ –∫–∞–∫ –≤–µ—Ä—Å–∏—è 0.5 Neovim –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ API, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–¥–≤–µ—Ä–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –¥–æ —Ä–µ–ª–∏–∑–∞.

### –ò–∑—É—á–µ–Ω–∏–µ Lua

–ï—Å–ª–∏ –≤—ã –Ω–µ–∑–Ω–∞–∫–æ–º—ã —Å —è–∑—ã–∫–æ–º, –∏–º–µ–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è:

- –†–µ—Å—É—Ä—Å [Learn X in Y minutes page about Lua](https://learnxinyminutes.com/docs/lua/) –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –ø–æ –æ—Å–Ω–æ–≤–∞–º —è–∑—ã–∫–∞
- –ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –≤–∏–¥–µ–æ—É—Ä–æ–∫–∏, —Ç–æ —É –î–µ—Ä–µ–∫–∞ –ë–∞–Ω–∞—Å–∞ (Derek Banas) –∏–º–µ–µ—Ç—Å—è —á–∞—Å–æ–≤–æ–π –≤–∏–¥–µ–æ—É—Ä–æ–∫ [1-hour tutorial on the language](https://www.youtube.com/watch?v=iMacxZQMPXs)
- –°–∞–π—Ç [lua-users wiki](http://lua-users.org/wiki/LuaDirectory) —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ Lua
- –°–∞–π—Ç [official reference manual for Lua](https://www.lua.org/manual/5.1/) –¥–æ–ª–∂–µ–Ω –¥–∞—Ç—å –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —è–∑—ã–∫–µ

–°–ª–µ–¥—É–µ—Ç –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ Lua —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å —á–∏—Å—Ç—ã–º –∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º. –Ø–∑—ã–∫ –ª–µ–≥–∫–æ –∏–∑—É—á–∏—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è –æ–ø—ã—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–æ–≤–æ–≥–æ —è–∑—ã–∫–∞ –Ω–∞–ø–æ–¥–æ–±–∏–µ Javascript. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ Lua –±–æ–ª—å—à–µ, —á–µ–º –≤—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ!

–ó–∞–º–µ—Ç–∫–∞: –≤–µ—Ä—Å–∏—è Lua, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤ Neovim —è–≤–ª—è–µ—Ç—Å—è LuaJIT 2.1.0, —á—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Lua 5.1 (—Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏ –≤ –≤–∏–¥–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –≤–µ—Ä—Å–∏–∏ 5.2)

### –ò–º–µ—é—â–∏–µ—Å—è —Ç—É—Ç–æ—Ä–∏–∞–ª—ã –ø–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞ Lua –¥–ª—è Neovim

–ë—ã–ª–æ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—É—Ç–æ—Ä–∏–∞–ª–æ–≤, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –ª—é–¥—è–º –Ω–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã –Ω–∞ Lua. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–≥–ª–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —ç—Ç–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞. –ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ –∏—Ö –∞–≤—Ç–æ—Ä–∞–º.

- [teukka.tech - From init.vim to init.lua](https://teukka.tech/luanvim.html)
- [2n.pl - How to write neovim plugins in Lua](https://www.2n.pl/blog/how-to-write-neovim-plugins-in-lua.md)
- [2n.pl - How to make UI for neovim plugins in Lua](https://www.2n.pl/blog/how-to-make-ui-for-neovim-plugins-in-lua)
- [ms-jpq - Neovim Async Tutorial](https://ms-jpq.github.io/neovim-async-tutorial/)

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã

- [Vimpeccable](https://github.com/svermeulen/vimpeccable) - –ü–ª–∞–≥–∏–Ω, –ø–æ–º–æ–≥–∞—é—â–∏–π –Ω–∞–ø–∏—Å–∞—Ç—å .vimrc –Ω–∞ Lua
- [plenary.nvim](https://github.com/nvim-lua/plenary.nvim) - –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Lua, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–µ —Ö–æ—á–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å
- [popup.nvim](https://github.com/nvim-lua/popup.nvim) - –ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è API –í—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω vim(vim Popup API) –¥–ª—è Neovim
- [nvim_utils](https://github.com/norcalli/nvim_utils)
- [nvim-luadev](https://github.com/bfredl/nvim-luadev) - REPL/–¥–µ–±–∞–≥ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤ Neovim, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ lua
- [nvim-luapad](https://github.com/rafcamlet/nvim-luapad) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Neovim —Å–∫—Ä–∞—Ç—á–ø–∞–¥ –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞ Lua
- [nlua.nvim](https://github.com/tjdevries/nlua.nvim) - Lua –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Neovim
- [BetterLua.vim](https://github.com/euclidianAce/BetterLua.vim) - –õ—É—á—à–∞—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ Lua –≤ Vim/NeoVim 

## –ö—É–¥–∞ –∫–ª–∞—Å—Ç—å —Ñ–∞–π–ª—ã Lua

### init.lua

Neovim –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ `init.lua` –≤–º–µ—Å—Ç–æ `init.vim` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–î–ª—è —Å–ø—Ä–∞–≤–æ–∫:
- `:help config`

### –î—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã Lua

–§–∞–π–ª—ã Lua –æ–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `lua/` –≤ –≤–∞—à–µ–π `runtimepath` (–¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —ç—Ç–æ –ø–∞–ø–∫–∞ `~/.config/nvim/lua` –Ω–∞ *nix-–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ `~/AppData/Local/nvim/lua` –¥–ª—è Windows). –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã —Å –ø–æ–º–æ—â—å—é `require()` –≤ –∫–∞—á–µ—Å—Ç–≤–µ Lua –º–æ–¥—É–ª–µ–π.

–í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –≤–æ–∑—å–º–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫:

```text
üìÇ ~/.config/nvim
‚îú‚îÄ‚îÄ üìÅ after
‚îú‚îÄ‚îÄ üìÅ ftplugin
‚îú‚îÄ‚îÄ üìÇ lua
‚îÇ  ‚îú‚îÄ‚îÄ üåë myluamodule.lua
‚îÇ  ‚îî‚îÄ‚îÄ üìÇ other_modules
‚îÇ     ‚îú‚îÄ‚îÄ üåë anothermodule.lua
‚îÇ     ‚îî‚îÄ‚îÄ üåë init.lua
‚îú‚îÄ‚îÄ üìÅ pack
‚îú‚îÄ‚îÄ üìÅ plugin
‚îú‚îÄ‚îÄ üìÅ syntax
‚îî‚îÄ‚îÄ üáª init.vim
```

Lua –∫–æ–¥ –Ω–∏–∂–µ –∑–∞–≥—Ä—É–∑–∏—Ç –º–æ–¥—É–ª—å `myluamodule.lua`:

```lua
require('myluamodule')
```

–ó–∞–º–µ—Ç—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞ `.lua`.

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –∑–∞–≥—Ä—É–∑–∫–∞ `other_modules/anothermodule.lua` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```lua
require('other_modules.anothermodule')
-- or
require('other_modules/anothermodule')
```

–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –ø—É—Ç–µ–π –æ–±–æ–∑–Ω–∞—á–µ–Ω—ã –ª–∏–±–æ —Ç–æ—á–∫–æ–π `.` –ª–∏–±–æ —Å–ª—ç—à–µ–º `/`.

–ü–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Ñ–∞–π–ª `init.lua` –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Ç–æ—á–Ω—è—Ç—å –∏–º—è —Ñ–∞–π–ª–∞.

```lua
require('other_modules') -- –∑–∞–≥—Ä—É–∂–∞–µ—Ç other_modules/init.lua
```

–î–ª—è –±–æ–ª—å—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: `:help lua-require`

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ñ–∞–π–ª–æ–≤ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .vim, —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .lua –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö `runtimepath`. –ö –ø—Ä–∏–º–µ—Ä—É, Neovim –∑–∞–≥—Ä—É–∑–∏—Ç `plugin/foo.vim`, –Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç `plugin/foo.lua`.

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- [Issue #12670](https://github.com/neovim/neovim/issues/12670)

#### –°–æ–≤–µ—Ç—ã

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ Lua –ø–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –∏–º–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `lua/`. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–ª–ª–∏–∑–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º—ë–Ω.

–ï—Å–ª–∏ –¥–≤–∞ –ø–ª–∞–≥–∏–Ω–∞ –∏–º–µ—é—Ç —Ñ–∞–π–ª `lua/main.lua`, –¢–æ –≤—ã–∑–æ–≤ `require('main')` –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω: –∫–∞–∫–æ–π —Ñ–∞–π–ª –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å?

–ü–æ—ç—Ç–æ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–∞—è –∏–¥–µ—è —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø–ª–∞–≥–∏–Ω–∞ —Å –ø–æ–º–æ—â—å—é –ø–∞–ø–∫–∏ –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ, –Ω–∞–ø–æ–¥–æ–±–∏–µ: `lua/plugin_name/main.lua`

#### –ó–∞–º–µ—Ç–∫–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–∞–∫–µ—Ç–æ–≤

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–æ—á–Ω—É—é —Å–±–æ—Ä–∫—É, —ç—Ç–æ [–±–æ–ª—å—à–µ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞] (https://github.com/neovim/neovim/pull/13119), –∏ –≤—ã –º–æ–∂–µ—Ç–µ —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª.

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `packages` –∏–ª–∏ –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ –Ω–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, [packer.nvim](https://github.com/wbthomason/packer.nvim), [minpac](https://github.com/k-takata/minpac) –∏–ª–∏ [vim-packager](https://github.com/kristijanhusak/vim-packager/)), –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ Lua —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å –æ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–µ—â–∞—Ö.

–ü–∞–∫–µ—Ç—ã –≤ –ø–∞–ø–∫–µ `start` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ `init.vim`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–∞–∫–µ—Ç –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `runtimepath` –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ Neovim –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –µ—Å–ª–∏ –ø–ª–∞–≥–∏–Ω –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤—ã –∑–∞–≥—Ä—É–∑–∏—Ç–µ(`require`)  –º–æ–¥—É–ª—å Lua –∏–ª–∏ –≤—ã–∑–æ–≤–µ—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é.

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞—è, —á—Ç–æ –≤ –ø–∞–∫–µ—Ç–µ `start/foo` –µ—Å—Ç—å —Ñ–∞–π–ª `lua/bar.lua`, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∏–∂–µ –≤ `init.vim` –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É, –ø–æ—Ç–æ–º—É —á—Ç–æ `runtimepath` –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω:

```vim
lua require('bar')
```

–í—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `packadd! foo` –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –≤—ã–∑–≤–∞—Ç—å –º–æ–¥—É–ª—å —á–µ—Ä–µ–∑ `require`.

```vim
packadd! foo
lua require('bar')
```

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ `!` –∫ `packadd` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ Neovim –ø–æ–º–µ—Å—Ç–∏—Ç –ø–∞–∫–µ—Ç –≤ `runtimepath` –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –µ–≥–æ –ø–∞–ø–∫–∞—Ö `plugin` –∏–ª–∏ `ftdetect`.

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help :packadd`
- [Issue #11409](https://github.com/neovim/neovim/issues/11409)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lua –≤ Vimscript

### :lua

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ Lua.

```vim
:lua require('myluamodule')
```

–ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤–æ–∑–º–æ–∂–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ heredoc:

```vim
echo "Here's a bigger chunk of Lua code"

lua << EOF
local mod = require('mymodule')
local tbl = {1, 2, 3}

for k, v in ipairs(tbl) do
    mod.method(v)
end

print(tbl)
EOF
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∫–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ `:lua` –∏–º–µ–µ—Ç —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏, –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `local`, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω–µ –∫–æ–º–∞–Ω–¥—ã. –≠—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç:

```vim
:lua local foo = 1
:lua print(foo)
" –≤—ã–≤–æ–¥–∏—Ç 'nil' –≤–º–µ—Å—Ç–æ '1'
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ 2: —Ñ—É–Ω–∫—Ü–∏—è `print()` –≤ Lua –≤–µ–¥–µ—Ç —Å–µ–±—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–æ–º–∞–Ω–¥–µ `:echomsg`. –ï–≥–æ –≤—ã–≤–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∞–≤–ª–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `:silent`.

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:

- `:help :lua`
- `:help :lua-heredoc`

### :luado

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ Lua, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç—Ä–æ–∫ –≤ —Ç–µ–∫—É—â–µ–º –±—É—Ñ–µ—Ä–µ. –ï—Å–ª–∏ –¥–∏–∞–ø–∞–∑–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω, –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ—Å—å –±—É—Ñ–µ—Ä. –°—Ç—Ä–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–∞—è –∏–∑ –±–ª–æ–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ–≥–æ, —á–µ–º –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω–∞ –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ.

–°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–º–µ–Ω–∏—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ç–µ–∫—É—â–µ–º –±—É—Ñ–µ—Ä–µ —Ç–µ–∫—Å—Ç–æ–º `hello world`:

```vim
:luado return 'hello world'
```

–¢–∞–∫–∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –¥–≤–µ –Ω–µ—è–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `line` –∏ `linenr`. `line` - —ç—Ç–æ —Ç–µ–∫—Å—Ç —Å—Ç—Ä–æ–∫–∏, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏—Ç–µ—Ä–∞—Ü–∏—è, –∞ `linenr` - –µ–µ –Ω–æ–º–µ—Ä. –°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É, –Ω–æ–º–µ—Ä –∫–æ—Ç–æ—Ä–æ–π –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 2, –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä:

```vim
:luado if linenr % 2 == 0 then return line:upper() end
```

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:

- `:help :luado`

### :luafile

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª Lua.

```vim
:luafile ~/foo/bar/baz/myluafile.lua
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –∫–æ–º–∞–Ω–¥–µ `:source` –¥–ª—è —Ñ–∞–π–ª–æ–≤ .vim –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `dofile()` –≤ Lua.

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:

- `:help :luafile`

#### luafile vs require():

–í–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –≤ —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `lua require()` –∏ `luafile`, –∏ —Å—Ç–æ–∏—Ç –ª–∏ –≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –≤–º–µ—Å—Ç–æ –¥—Ä—É–≥–æ–≥–æ. –£ –Ω–∏—Ö —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

- `require()`:
    - —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Lua. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É Lua
    - –∏—â–µ—Ç –º–æ–¥—É–ª–∏ –≤ –ø–∞–ø–∫–∞—Ö `lua` –≤ –≤–∞—à–µ–º `runtimepath`
    - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞. –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –∫–æ–¥ –¥–ª—è –º–æ–¥—É–ª—è, –∏ –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å `require()` –≤—Ç–æ—Ä–æ–π —Ä–∞–∑ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã Neovim, –º–æ–¥—É–ª—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è
- `:luafile`:
    - —è–≤–ª—è–µ—Ç—Å—è Ex –∫–æ–º–∞–Ω–¥–æ–π. –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–¥—É–ª–∏
    - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ä–∞–±–æ—á–µ–π –ø–∞–ø–∫–µ —Ç–µ–∫—É—â–µ–≥–æ –æ–∫–Ω–∞
    - –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –ª–∏ –æ–Ω —Ä–∞–Ω—å—à–µ

`:luafile` —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∞–π–ª Lua, –Ω–∞–¥ –∫–æ—Ç–æ—Ä—ã–º –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ:

```vim
:luafile %
```

### luaeval()

–≠—Ç–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Vimscript –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ Lua –≤ —Ñ–æ—Ä–º–µ —Å—Ç—Ä–æ–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Lua –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ç–∏–ø—ã Vimscript (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç).

```vim
" –í—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
let variable = luaeval('1 + 1')
echo variable
" 2
let concat = luaeval('"Lua".." is ".."awesome"')
echo concat
" 'Lua is awesome'

" –¢–∞–±–ª–∏—Ü—ã –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–∏ Vim.
let list = luaeval('{1, 2, 3, 4}')
echo list[0]
" 1
echo list[1]
" 2
" –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ç–∞–±–ª–∏—Ü Lua, —Å–ø–∏—Å–∫–∏ Vim –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è —Å –Ω—É–ª—è 

" –¢–∞–±–ª–∏—Ü—ã –≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä–µ–π –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–ª–æ–≤–∞—Ä–∏ Vim.
let dict = luaeval('{foo = "bar", baz = "qux"}')
echo dict.foo
" 'bar'

" –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π nil
echo luaeval('true')
" v:true
echo luaeval('nil')
" v:null

" –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–ª–∏–∞—Å –≤ Vimscript –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π Lua.
let LuaMathPow = luaeval('math.pow')
echo LuaMathPow(2, 2)
" 4
let LuaModuleFunction = luaeval('require("mymodule").myfunction')
call LuaModuleFunction()

" –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ Lua –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü–∏—è–º Vim.
lua X = function(k, v) return string.format("%s:%s", k, v) end
echo map([1, 2, 3], luaeval("X"))
```

`luaeval()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º –∏–∑ Lua, –∏—Å–ø–æ–ª—å–∑—É—è –≤–æ–ª—à–µ–±–Ω—É—é –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `_A`:

```vim
echo luaeval('_A[1] + _A[2]', [1, 1])
" 2

echo luaeval('string.format("Lua is %s", _A)', 'awesome')
" 'Lua is awesome'
```

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help luaeval()`

### v:lua

–≠—Ç–∞ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è Vim –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –≤—ã–∑—ã–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Lua –ø—Ä—è–º–æ –∏–∑ Vimscript. –û–ø—è—Ç—å –∂–µ, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Vim –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ç–∏–ø—ã Lua –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.

```vim
call v:lua.print('Hello from Lua!')
" 'Hello from Lua!'

let scream = v:lua.string.rep('A', 10)
echo scream
" 'AAAAAAAAAA'

" –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
call v:lua.require('mymodule').myfunction()

" –ö–∞–∫ –Ω–∞—Å—á–µ—Ç –Ω–µ–ø–ª–æ—Ö–æ–π —Å—Ç–∞—Ç—É—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏?
lua << EOF
function _G.statusline()
    local filepath = '%f'
    local align_section = '%='
    local percentage_through_file = '%p%%'
    return string.format(
        '%s%s%s',
        filepath,
        align_section,
        percentage_through_file
    )
end
EOF

set statusline=%!v:lua.statusline()

" –¢–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
lua << EOF
function _G.check_back_space()
    local col = vim.fn.col('.') - 1
    if col == 0 or vim.fn.getline('.'):sub(col, col):match('%s') then
        return true
    else
        return false
    end
end
EOF

inoremap <silent> <expr> <Tab>
    \ pumvisible() ? '\<C-n>' :
    \ v:lua.check_back_space() ? '\<Tab>' :
    \ completion#trigger_completion()
```

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help v:lua`
- `:help v:lua-call`

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–≠—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π. –°–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É:

```vim
" –°–æ–∑–¥–∞–Ω–∏–µ –∞–ª–∏–∞—Å–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
let LuaPrint = v:lua.print

" –î–æ—Å—Ç—É–ø –∫ —Å–ª–æ–≤–∞—Ä—è–º –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
echo v:lua.some_global_dict['key']

" –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
echo map([1, 2, 3], v:lua.global_callback)
```

### –°–æ–≤–µ—Ç—ã

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Lua –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤ .vim, –ø–æ–º–µ—Å—Ç–∏–≤ let `g: vimsyn_embed = 'l'` –≤ —Å–≤–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –°–º. `:help g:vimsyn_embed` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —ç—Ç–æ–π –æ–ø—Ü–∏–∏.

## –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω vim

Neovim –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `vim`, –∫–æ—Ç–æ—Ä–∞—è —Å–ª—É–∂–∏—Ç —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –µ—ë API –∏–∑ Lua. –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É" —Ñ—É–Ω–∫—Ü–∏–π, –∞ —Ç–∞–∫–∂–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–¥–º–æ–¥—É–ª–∏.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–æ–¥—É–ª–∏ –≤–∫–ª—é—á–∞—é—Ç:

- `vim.inspect`: –≤—ã–≤–æ–¥ Lua –æ–±—ä–µ–∫—Ç–æ–≤ (–ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–±–ª–∏—Ü)
- `vim.regex`: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π Vim –∏–∑ Lua
- `vim.api`: –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ API (—Ç–æ—Ç –∂–µ API, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —É–¥–∞–ª—ë–Ω–Ω—ã–µ(remote) –ø–ª–∞–≥–∏–Ω—ã)
- `vim.loop`: –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π Neovim (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LibUV)
- `vim.lsp`: –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º LSP
- `vim.treesitter`: –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ tree-sitter

–≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–º. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ —Ç–æ–º, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `vim`, `:help lua-stdlib` –∏ `:help lua-vim` –≤–∞–º –≤ –ø–æ–º–æ—â—å :). –í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å `:lua print (vim.inspect (vim))`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.

#### –°–æ–≤–µ—Ç—ã

–ü–∏—Å–∞—Ç—å `print(vim.inspect(x))` –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–±—ä–µ–∫—Ç–∞, –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ–≤–æ–ª—å–Ω–æ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω—ã–º. –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –∏–º–µ—Ç—å –≥–¥–µ-–Ω–∏–±—É–¥—å –≤ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é-–æ–±–æ–ª–æ—á–∫—É:

```lua
function _G.dump(...)
    local objects = vim.tbl_map(vim.inspect, {...})
    print(unpack(objects))
end
```

–ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–±—ä–µ–∫—Ç–∞ –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ –∏–ª–∏ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

```lua
dump({1, 2, 3})
```

```vim
:lua dump(vim.loop)
```


–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å, —á—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Lua –∏–Ω–æ–≥–¥–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —Ç–µ–º, —á—Ç–æ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `os.clock()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –∞ –Ω–µ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö). –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ Neovim stdlib (–∏ `vim.fn`, –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º –ø–æ–∑–∂–µ), –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ –Ω–µ–º –µ—Å—Ç—å —Ç–æ, —á—Ç–æ –≤—ã –∏—â–µ—Ç–µ.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Vimscript –∏–∑ Lua

### vim.api.nvim_eval()

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤—ã—Ä–∞–∂–µ–Ω–∏—è Vimscript –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö Vimscript –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Ç–∏–ø—ã Lua (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç).

–≠—Ç–æ Lua-—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `luaeval()` –≤ Vimscript.

```lua
-- –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
print(vim.api.nvim_eval('1 + 1')) -- 2
print(vim.inspect(vim.api.nvim_eval('[1, 2, 3]'))) -- { 1, 2, 3 }
print(vim.inspect(vim.api.nvim_eval('{"foo": "bar", "baz": "qux"}'))) -- { baz = "qux", foo = "bar" }
print(vim.api.nvim_eval('v:true')) -- true
print(vim.api.nvim_eval('v:null')) -- nil
```

**TODO**: –≤–æ–∑–º–æ–∂–Ω–æ –ª–∏, —á—Ç–æ–±—ã `vim.api.nvim_eval()` –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ `funcref`?

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `luaeval()`, `vim.api.nvim_eval()` –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—è–≤–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `_A` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ.

### vim.api.nvim_exec()

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ Vimscript. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –¥–æ–ª–∂–µ–Ω –ª–∏ –≤—ã–≤–æ–¥ –∫–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π (–≤—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–≤–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞).

```lua
local result = vim.api.nvim_exec(
[[
let mytext = 'hello world'

function! MyFunction(text)
    echo a:text
endfunction

call MyFunction(mytext)
]],
true)

print(result) -- 'hello world'
```

**TODO**: –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ  —Å–∫—Ä–∏–ø—Ç–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è(`s:`) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –∑–∞–ø—É—Å–∫ —ç—Ç–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∫—Ä–∏–ø—Ç–æ–≤–æ–π –æ–±–ª–∞—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è  –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É. –ü–æ—á–µ–º—É?

### vim.api.nvim_command()

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É ex. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```lua
vim.api.nvim_command('new')
vim.api.nvim_command('wincmd H')
vim.api.nvim_command('set nonumber')
vim.api.nvim_command('%s/foo/bar/g')
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: `vim.cmd` - –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π alias –¥–ª—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.

```lua
vim.cmd('buffers')
```

#### –°–æ–≤–µ—Ç—ã

–ü–æ—Å–∫–æ–ª—å–∫—É –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —ç—Ç–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º, –≤–∞–º —á–∞—Å—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—ã–π —Å–ª—ç—à:

```lua
vim.cmd('%s/\\Vfoo/bar/g')
```

–°—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã –ø—Ä–æ—â–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —ç–∫—Ä–∞–Ω–∏—Ä—É—é—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤:

```lua
vim.cmd([[%s/\Vfoo/bar/g]])
```

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–∏ vim

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π API

Neovim –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π API –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–ø—Ü–∏–∏ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –µ—ë —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:

- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:
    - `vim.api.nvim_set_option()`
    - `vim.api.nvim_get_option()`
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –±—É—Ñ–µ—Ä–æ–≤:
    - `vim.api.nvim_buf_set_option()`
    - `vim.api.nvim_buf_get_option()`
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –æ–∫–æ–Ω:
    - `vim.api.nvim_win_set_option()`
    - `vim.api.nvim_win_get_option()`

–û–Ω–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∏–º—è –æ–ø—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å / –ø–æ–ª—É—á–∏—Ç—å, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.

–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `(no)number`) –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ `true` –∏–ª–∏ `false`:

```lua
vim.api.nvim_set_option('smarttab', false)
print(vim.api.nvim_get_option('smarttab')) -- false
```

–ù–µ—É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞–º–∏:

```lua
vim.api.nvim_set_option('selection', 'exclusive')
print(vim.api.nvim_get_option('selection')) -- 'exclusive'
```

–ß–∏—Å–ª–æ–≤—ã–µ –æ–ø—Ü–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —á–∏—Å–ª–æ:

```lua
vim.api.nvim_set_option('updatetime', 3000)
print(vim.api.nvim_get_option('updatetime')) -- 3000
```

–õ–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –±—É—Ñ—Ñ–µ—Ä–∞ –∏ –æ–∫–Ω–∞ —Ç–∞–∫–∂–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ –Ω–æ–º–µ—Ä–µ –±—É—Ñ–µ—Ä–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä–µ –æ–∫–Ω–∞ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `0` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç/–ø–æ–ª—É—á–∏—Ç –æ–ø—Ü–∏—é –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±—É—Ñ–µ—Ä–∞/–æ–∫–Ω–∞)

```lua
vim.api.nvim_win_set_option(0, 'number', true)
vim.api.nvim_buf_set_option(10, 'shiftwidth', 4)
print(vim.api.nvim_win_get_option(0, 'number')) -- true
print(vim.api.nvim_buf_get_option(10, 'shiftwidth')) -- 4
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ–ª–µ–µ "–∏–¥–∏–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º" —Å–ø–æ—Å–æ–±–æ–º, –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å—É–∞—Ä–æ–≤. –ü–æ —Å—É—Ç–∏, –æ–Ω–∏ –æ–±–µ—Ä—Ç—ã–≤–∞—é—Ç –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω–∏ –±—ã–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

- `vim.o.{option}`: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏
- `vim.bo.{option}`: –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –±—É—Ñ—Ñ–µ—Ä–∞
- `vim.wo.{option}`: –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –æ–∫–Ω–∞

```lua
vim.o.smarttab = false
print(vim.o.smarttab) -- false

vim.bo.shiftwidth = 4
print(vim.bo.shiftwidth) -- 4
```

–í—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –¥–ª—è –æ–ø—Ü–∏–π, –ª–æ–∫–∞–ª—å–Ω—ã—Ö –¥–ª—è –±—É—Ñ–µ—Ä–∞ –∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞. –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä / –æ–∫–Ω–æ:

```lua
vim.bo[4].expandtab = true -- —Ç–æ–∂–µ —Å–∞–º–æ–µ —á—Ç–æ –∏ vim.api.nvim_buf_set_option(4, 'expandtab', true)
vim.wo.number = true -- —Ç–æ–∂–µ —Å–∞–º–æ–µ —á—Ç–æ –∏ vim.api.nvim_win_set_option(0, 'number', true)
```

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help lua-vim-internal-options`

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–í Lua –Ω–µ—Ç —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–∞ –∫–æ–º–∞–Ω–¥–µ `:set`, –≤—ã –ª–∏–±–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –≥–ª–æ–±–∞–ª—å–Ω–æ, –ª–∏–±–æ –ª–æ–∫–∞–ª—å–Ω–æ.

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help :setglobal`
- `:help global-local`

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ vim

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π API

–ö–∞–∫ –∏ —É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π API:

- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`g:`):
     - `vim.api.nvim_set_var ()`
     - `vim.api.nvim_get_var ()`
     - `vim.api.nvim_del_var ()`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä–∞ (`b:`):
     - `vim.api.nvim_buf_set_var ()`
     - `vim.api.nvim_buf_get_var ()`
     - `vim.api.nvim_buf_del_var ()`
- –û–∫–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`w:`):
     - `vim.api.nvim_win_set_var ()`
     - `vim.api.nvim_win_get_var ()`
     - `vim.api.nvim_win_del_var ()`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ (`t:`):
     - `vim.api.nvim_tabpage_set_var ()`
     - `vim.api.nvim_tabpage_get_var ()`
     - `vim.api.nvim_tabpage_del_var ()`
- –ü—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Vim (`v:`):
     - `vim.api.nvim_set_vvar ()`
     - `vim.api.nvim_get_vvar ()`

–ó–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Vim, –æ–Ω–∏ —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã (–∫–æ–º–∞–Ω–¥–∞ `:unlet` —è–≤–ª—è–µ—Ç—Å—è —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–æ–º –≤ Vimscript). –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`l:`), —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`s:`) –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ (`a:`) –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –∏–º–µ—é—Ç —Å–º—ã—Å–ª —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Vimscript, Lua –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã —Å —Ç–µ–º, —á—Ç–æ –¥–µ–ª–∞—é—Ç —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, `:help internal-variables` –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –ø–æ–¥—Ä–æ–±–Ω–æ.

–≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è/–ø–æ–ª—É—á–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.

```lua
vim.api.nvim_set_var('some_global_variable', { key1 = 'value', key2 = 300 })
print(vim.inspect(vim.api.nvim_get_var('some_global_variable'))) -- { key1 = "value", key2 = 300 }
vim.api.nvim_del_var('some_global_variable')
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –±—É—Ñ–µ—Ä–æ–º, –æ–∫–Ω–æ–º –∏–ª–∏ –≤–∫–ª–∞–¥–∫–æ–π, —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–º–µ—Ä (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `0` –∏–∑–º–µ–Ω–∏—Ç/–ø–æ–ª—É—á–∏—Ç/—É–¥–∞–ª–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±—É—Ñ–µ—Ä–∞/–æ–∫–Ω–∞/–≤–∫–ª–∞–¥–∫–∏):

```lua
vim.api.nvim_win_set_var(0, 'some_window_variable', 2500)
vim.api.nvim_tab_set_var(3, 'some_tabpage_variable', 'hello world')
print(vim.api.nvim_win_get_var(0, 'some_window_variable')) -- 2500
print(vim.api.nvim_buf_get_var(3, 'some_tabpage_variable')) -- 'hello world'
vim.api.nvim_win_del_var(0, 'some_window_variable')
vim.api.nvim_buf_del_var(3, 'some_tabpage_variable')
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ —Å –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤:

- `vim.g.{name}`: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `vim.b.{name}`: –±—É—Ñ–µ—Ä–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- `vim.w.{name}`: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞
- `vim.t.{name}`: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
- `vim.v.{name}`: –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Vim

```lua
vim.g.some_global_variable = {
    key1 = 'value',
    key2 = 300
}

print(vim.inspect(vim.g.some_global_variable)) -- { key1 = "value", key2 = 300 }
```

–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –æ–¥–Ω—É –∏–∑ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏—Å–≤–æ–π—Ç–µ –µ–π `nil`:

```lua
vim.g.some_global_variable = nil
```

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–µ—Ç–∞-–∞–∫—Å–µ—Å—Å–æ—Ä–æ–≤ –æ–ø—Ü–∏–π, –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –æ–±–ª–∞—Å—Ç—å—é –±—É—Ñ–µ—Ä–∞/–æ–∫–Ω–∞/–≤–∫–ª–∞–¥–∫–∏.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å/–æ–±–Ω–æ–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å –∫–ª—é—á–∏ –∏–∑ —Å–ª–æ–≤–∞—Ä—è, —Ö—Ä–∞–Ω—è—â–µ–≥–æ—Å—è –≤ –æ–¥–Ω–æ–π –∏–∑ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ Vimscript –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```vim
let g:variable = {}
lua vim.g.variable.key = 'a'
echo g:variable
" {}
```

–≠—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

- [Issue #12544](https://github.com/neovim/neovim/issues/12544)

## –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π Vimscript

### vim.call()

`vim.call()` –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é Vimscript. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è Vim –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è. –û–ø—è—Ç—å –∂–µ, —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ Lua –≤ Vimscript –∏ –æ–±—Ä–∞—Ç–Ω–æ.

–û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–º —Å–ª–µ–¥—É—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

```lua
print(vim.call('printf', 'Hello from %s', 'Lua'))

local reversed_list = vim.call('reverse', { 'a', 'b', 'c' })
print(vim.inspect(reversed_list)) -- { "c", "b", "a" }

local function print_stdout(chan_id, data, name)
    print(data[1])
end

vim.call('jobstart', 'ls', { on_stdout = print_stdout })

vim.call('my#autoload#function')
```

See also:
- `:help vim.call()`

### vim.fn.{function}()

`vim.fn` does the exact same thing as `vim.call()`, but looks more like a native Lua function call:

```lua
print(vim.fn.printf('Hello from %s', 'Lua'))

local reversed_list = vim.fn.reverse({ 'a', 'b', 'c' })
print(vim.inspect(reversed_list)) -- { "c", "b", "a" }

local function print_stdout(chan_id, data, name)
    print(data[1])
end

vim.fn.jobstart('ls', { on_stdout = print_stdout })
```

–•—ç—à–∏ `#` –Ω–µ —è–≤–ª—è—é—Ç—Å—è –¥–æ–ø—É—Å—Ç–∏–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ Lua, –ø–æ—ç—Ç–æ–º—É —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ª–∂–Ω—ã –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Å —Ç–∞–∫–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º:

```lua
vim.fn['my#autoload#function']()
```

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help vim.fn`

#### –°–æ–≤–µ—Ç—ã

Neovim –∏–º–µ–µ—Ç –æ–±—à–∏—Ä–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –º–æ—â–Ω—ã—Ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤. –°–º–æ—Ç—Ä–∏—Ç–µ `:help vim-function` –¥–ª—è —Å–ø–∏—Å–∫–∞ –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –∏ `:help function-list` –¥–ª—è —Å–ø–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ —Ç–µ–º–∞–º.

#### –ü—Ä–µ–¥–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–∏—è

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Vim, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `1` –∏–ª–∏ `0`. –í Vimscript —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –ø–æ—Å–∫–æ–ª—å–∫—É `1` –∏—Å—Ç–∏–Ω–Ω–æ, –∞ `0` –ª–æ–∂–Ω–æ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:

```vim
if has('nvim')
    " do something...
endif
```

–û–¥–Ω–∞–∫–æ –≤ Lua –ª–æ–∂–Ω—ã–º–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ `false` –∏ `nil`, —á–∏—Å–ª–∞ –≤—Å–µ–≥–¥–∞ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ `true`, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è. –í—ã –¥–æ–ª–∂–Ω—ã —è–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `1` –∏–ª–∏ `0`:

```lua
if vim.fn.has('nvim') == 1 then
    -- do something...
end
```

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π –∫–ª–∞–≤–∏—à

Neovim –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π API –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π:

- –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π:
    - `vim.api.nvim_set_keymap()`
    - `vim.api.nvim_get_keymap()`
    - `vim.api.nvim_del_keymap()`
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π:
    - `vim.api.nvim_buf_set_keymap()`
    - `vim.api.nvim_buf_get_keymap()`
    - `vim.api.nvim_buf_del_keymap()`

–ù–∞—á–Ω–µ–º —Å `vim.api.nvim_set_keymap()` –∏ `vim.api.nvim_buf_set_keymap()`

–ü–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –≤ —Ñ—É–Ω–∫—Ü–∏—é, —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∏–º—è —Ä–µ–∂–∏–º–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å:

| –°—Ç—Ä–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ      | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–º–æ—â–∏ | –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ä–µ–∂–∏–º—ã                        | –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç Vimscript |
| ---------------------- | -------------   | ---------------------------------------- | -------------------- |
| `''` (–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)   | `mapmode-nvo`   | Normal, Visual, Select, Operator-pending | `:map`               |
| `'n'`                  | `mapmode-n`     | Normal                                   | `:nmap`              |
| `'v'`                  | `mapmode-v`     | Visual and Select                        | `:vmap`              |
| `'s'`                  | `mapmode-s`     | Select                                   | `:smap`              |
| `'x'`                  | `mapmode-x`     | Visual                                   | `:xmap`              |
| `'o'`                  | `mapmode-o`     | Operator-pending                         | `:omap`              |
| `'!'`                  | `mapmode-ic`    | Insert and Command-line                  | `:map!`              |
| `'i'`                  | `mapmode-i`     | Insert                                   | `:imap`              |
| `'l'`                  | `mapmode-l`     | Insert, Command-line, Lang-Arg           | `:lmap`              |
| `'c'`                  | `mapmode-c`     | Command-line                             | `:cmap`              |
| `'t'`                  | `mapmode-t`     | Terminal                                 | `:tmap`              |

–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –ª–µ–≤—É—é —á–∞—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∫–ª—é—á –∏–ª–∏ –Ω–∞–±–æ—Ä –∫–ª—é—á–µ–π, –∑–∞–ø—É—Å–∫–∞—é—â–∏—Ö –∫–æ–º–∞–Ω–¥—É, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –≤ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏). –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ `<Nop>`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–∫–ª—é—á–∞–µ—Ç –∫–ª—é—á.

–¢—Ä–µ—Ç–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è (–∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è).

–ü–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç - —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ `:help :map-arguments` (–≤–∫–ª—é—á–∞—è `noremap` –∏ –∏—Å–∫–ª—é—á–∞—è `buffer`).

–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –±—É—Ñ–µ—Ä–æ–≤ —Ç–∞–∫–∂–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–æ–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (`0` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±—É—Ñ–µ—Ä–∞).

```lua
vim.api.nvim_set_keymap('n', '<leader><Space>', ':set hlsearch!<CR>', { noremap = true, silent = true })
-- :nnoremap <silent> <leader><Space> :set hlsearch<CR>

vim.api.nvim_buf_set_keymap(0, '', 'cc', 'line(".") == 1 ? "cc" : "ggcc"', { noremap = true, expr = true })
-- :noremap <buffer> <expr> cc line('.') == 1 ? 'cc' : 'ggcc'
```

`vim.api.nvim_get_keymap()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∫—Ä–∞—Ç–∫–æ–µ –∏–º—è —Ä–µ–∂–∏–º–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π (—Å–º. —Ç–∞–±–ª–∏—Ü—É –≤—ã—à–µ). –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–µ–∂–∏–º–∞.

```lua
print(vim.inspect(vim.api.nvim_get_keymap('n')))
-- :verbose nmap
```

`vim.api.nvim_buf_get_keymap ()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (`0` –ø–æ–ª—É—á–∏—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –±—É—Ñ–µ—Ä–∞)

```lua
print(vim.inspect(vim.api.nvim_buf_get_keymap(0, 'i')))
-- :verbose imap <buffer>
```

`vim.api.nvim_del_keymap()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ–∂–∏–º –∏ –ª–µ–≤—É—é —á–∞—Å—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è.

```lua
vim.api.nvim_del_keymap('n', '<leader><Space>')
-- :nunmap <leader><Space>
```

–û–ø—è—Ç—å –∂–µ, `vim.api.nvim_buf_del_keymap ()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞, –≥–¥–µ `0` –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä.

```lua
vim.api.nvim_buf_del_keymap(0, 'i', '<Tab>')
-- :iunmap <buffer> <Tab>
```

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –≤ Lua –Ω–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥. –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ, –ø–ª–∞–Ω—ã –∏–º–µ—é—Ç—Å—è:

- [Pull request #11613](https://github.com/neovim/neovim/pull/11613)

–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –≤–∞–º, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ª—É—á—à–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ Vimscript.

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–∫–æ–º–∞–Ω–¥

Augroup-—ã –∏ autcommand-—ã –µ—â–µ –Ω–µ –∏–º–µ—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, –Ω–æ –Ω–∞–¥ –Ω–∏–º —Ä–∞–±–æ—Ç–∞—é—Ç:

- [Pull request #12378](https://github.com/neovim/neovim/pull/12378)

–ê –ø–æ–∫–∞ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞–≤—Ç–æ–∫–æ–º–∞–Ω–¥—ã –≤ Vimscript –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [—ç—Ç—É –æ–±–æ–ª–æ—á–∫—É –∏–∑ norcalli/nvim_utils](https://github.com/norcalli/nvim_utils/blob/master/lua/nvim_utils.lua#L554-L567)

## –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞/–ø–æ–¥—Å–≤–µ—Ç–∫–∏

–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π API –≤—Å–µ –µ—â–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å—Ç–∞–¥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í–æ—Ç –ø–∞—Ä–∞ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π:

- [Issue #9876](https://github.com/neovim/neovim/issues/9876)
- [tjdevries/colorbuddy.vim, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤—ã—Ö —Å—Ö–µ–º –≤ Lua](https://github.com/tjdevries/colorbuddy.vim)
- `:help lua-treesitter`

## –û–±—â–∏–µ —Å–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–≤/—è–∑—ã–∫–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–∏–Ω—Ç–µ—Ä—ã –∏/–∏–ª–∏ —è–∑—ã–∫–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ Lua, –≤–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è –Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è Neovim. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

#### luacheck

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Å—Ç–∞–≤–∏—Ç—å [luacheck](https://github.com/mpeterv/luacheck/) —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å –≥–ª–æ–±–∞–ª `vim`, –ø–æ–º–µ—Å—Ç–∏–≤ —ç—Ç—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `~/.luacheckrc` (–∏–ª–∏ `$XDG_CONFIG_HOME/luacheck/.luacheckrc`):

```lua
globals = {
    "vim",
}
```

–Ø–∑—ã–∫–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä [Alloyed/lua-lsp](https://github.com/Alloyed/lua-lsp/) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç luacheck –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ª–∏–Ω—Ç–∏–Ω–≥–∞ –∏ —á–∏—Ç–∞–µ—Ç —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å `luacheck`, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –µ–≥–æ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://luacheck.readthedocs.io/en/stable/config.html)

#### sumneko/lua-language-server

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è [sumneko/lua-language-server](https://github.com/sumneko/lua-language-server/) (–≤ –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç LSP, –Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ LSP –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–¥–µ–Ω—Ç–∏—á–Ω–∞):

```lua
require'lspconfig'.sumneko_lua.setup {
    settings = {
        Lua = {
            runtime = {
                -- –ó–∞—Å—Ç–∞–≤—å—Ç–µ —è–∑—ã–∫–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ LuaJIT, —Ç–∞–∫–∏–µ –∫–∞–∫ `jit` –∏` bit`
                version = 'LuaJIT',
                - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É—Ç—å –∫ lua
                path = vim.split(package.path, ';'),
            },
            diagnostics = {
                - –ó–∞—Å—Ç–∞–≤—å—Ç–µ —è–∑—ã–∫–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `vim`
                globals = {'vim'},
            },
            workspace = {
                -- –°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä –∑–Ω–∞–ª –æ —Ä–∞–Ω—Ç–∞–π–º —Ñ–∞–π–ª–∞—Ö Neovim
                library = {
                    [vim.fn.expand('$VIMRUNTIME/lua')] = true,
                    [vim.fn.expand('$VIMRUNTIME/lua/vim/lsp')] = true,
                },
            },
        },
    },
}
```

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ [sumneko/lua-language-server](https://github.com/sumneko/lua-language-server/) —Å–º. ["Setting without VSCode"](https://github.com/sumneko/lua-language-server/wiki/Setting-without-VSCode)

#### coc.nvim

–ò—Å—Ç–æ—á–Ω–∏–∫ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è [rafcamlet/coc-nvim-lua](https://github.com/rafcamlet/coc-nvim-lua/) –¥–ª—è [coc.nvim](https://github.com/neoclide/coc.nvim/) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Neovim stdlib.

**TODO**:

- –ì–æ—Ä—è—á–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
- `vim.validate()`?
- –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –æ –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–∞—Ö? –Ø –∑–Ω–∞—é, —á—Ç–æ Neovim –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ [busted](https://olivinelabs.com/busted/), –Ω–æ —è –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤.
- –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏? –Ø –Ω–µ Lua –º–∞—Å—Ç–µ—Ä, –ø–æ—ç—Ç–æ–º—É –Ω–µ –∑–Ω–∞—é
- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã LuaRocks ([wbthomason/packer.nvim](https://github.com/wbthomason/packer.nvim)?)

## –†–∞–∑–Ω–æ–µ

### vim.loop

`vim.loop`- —ç—Ç–æ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API LibUV . –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—Å—É—Ä—Å—ã:

- [Official documentation for LibUV](https://docs.libuv.org/en/v1.x/)
- [Luv documentation](https://github.com/luvit/luv/blob/master/docs.md)
- [teukka.tech - Using LibUV in Neovim](https://teukka.tech/vimloop.html)

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help vim.loop`

### vim.lsp

`vim.lsp` - —ç—Ç–æ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º LSP. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π [neovim/nvim-lspconfig](https://github.com/neovim/nvim-lspconfig/) —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ "lsp-handlers". –î–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:
- `:help lsp-handler`
- [neovim/neovim#12655](https://github.com/neovim/neovim/pull/12655)
- [How to migrate from diagnostic-nvim](https://github.com/nvim-lua/diagnostic-nvim/issues/73#issue-737897078)

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ –ø–ª–∞–≥–∏–Ω—ã, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∫—Ä—É–≥ –∫–ª–∏–µ–Ω—Ç–∞ LSP:
- [nvim-lua/completion-nvim](https://github.com/nvim-lua/completion-nvim)
- [RishabhRD/nvim-lsputils](https://github.com/RishabhRD/nvim-lsputils)

–¢–∞–∫–∂–µ —Å–º–æ—Ç—Ä–∏—Ç–µ:
- `:help lsp`

### vim.treesitter

`vim.treesitter` - —ç—Ç–æ –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Tree-sitter](https://tree-sitter.github.io/tree-sitter/) –≤ Neovim. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ Tree-sitter, –≤–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ —ç—Ç–∞ [–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (38:37)](https://www.youtube.com/watch?v=Jes3bD6P0To).

–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è [nvim-treeitter](https://github.com/nvim-treesitter/) —Ä–∞–∑–º–µ—â–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

See also:
- `:help lua-treesitter`

### –¢—Ä–∞–Ω—Å–ø–∞–π–ª–µ—Ä—ã

–û–¥–Ω–∏–º –∏–∑ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Lua —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤–∞–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ Lua! –î–ª—è —ç—Ç–æ–≥–æ —è–∑—ã–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–∞–π–ª–µ—Ä–æ–≤.

- [Moonscript](https://moonscript.org/)

–í–µ—Ä–æ—è—Ç–Ω–æ, –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–ø–∏–ª–µ—Ä–æ–≤ –¥–ª—è Lua. –î–æ–±–∞–≤–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É–¥–æ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∫–ª–∞—Å—Å—ã, —Å–ø–∏—Å–∫–æ–≤–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã. –ü–ª–∞–≥–∏–Ω [svermeulen/nvim-moonmaker](https://github.com/svermeulen/nvim-moonmaker) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –ø–ª–∞–≥–∏–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É Neovim –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ Moonscript.

- [Fennel](https://fennel-lang.org/)

Lisp, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ Lua. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è Neovim –≤ Fennel —Å –ø–æ–º–æ—â—å—é –ø–ª–∞–≥–∏–Ω–∞ [Olical/aniseed](https://github.com/Olical/aniseed). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø–ª–∞–≥–∏–Ω [Olical/conjure](https://github.com/Olical/conjure) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å—Ä–µ–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Fennel (—Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤).

–î—Ä—É–≥–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã:
- [TypeScriptToLua/TypeScriptToLua](https://github.com/TypeScriptToLua/TypeScriptToLua)
- [teal-language/tl](https://github.com/teal-language/tl)
- [Haxe](https://haxe.org/)
- [SwadicalRag/wasm2lua](https://github.com/SwadicalRag/wasm2lua)
- [hengestone/lua-languages](https://github.com/hengestone/lua-languages)